# 超軽量マインドマップアプリ要件定義書

## 1. プロジェクト概要
### 目的
超軽量で高速に動作するマインドマップアプリケーションの開発

### ターゲットユーザー
- アイデア整理をしたい個人ユーザー
- ブレインストーミングを行うチーム
- 学習内容を視覚的に整理したい学生

## 2. 機能要件

### 必須機能（MVP）
1. **ノード操作**
   - ノードの追加・削除
   - ノードのテキスト編集
   - ノードの移動（ドラッグ&ドロップ）
   - 親子関係の設定

2. **基本的な編集機能**
   - 元に戻す（Undo）/ やり直し（Redo）
   - コピー&ペースト
   - ノードの複製

3. **表示機能**
   - ズーム（拡大・縮小）
   - パン（画面移動）
   - 全体表示（フィット）
   - ノードの折りたたみ/展開

4. **データ管理**
   - ローカルストレージへの自動保存
   - JSONファイルとしてエクスポート
   - JSONファイルからインポート

### 追加機能（Phase 2）
1. **スタイリング**
   - ノードの色変更
   - フォントサイズの調整
   - ノード形状の選択（矩形、楕円、角丸）

2. **ショートカット**
   - キーボードショートカット対応
   - Tab/Enterでノード追加
   - Deleteでノード削除

3. **共有機能**
   - 画像（PNG/SVG）エクスポート
   - URLシェア機能

## 3. 非機能要件

### パフォーマンス要件
- **初期ロード時間**: 500ms以下
- **ノード追加レスポンス**: 50ms以下
- **大規模マップ対応**: 1000ノードまでスムーズに動作
- **メモリ使用量**: 50MB以下（通常使用時）

### ユーザビリティ要件
- **直感的な操作**: 学習コスト最小限
- **レスポンシブデザイン**: モバイル・タブレット対応
- **アクセシビリティ**: キーボードのみで操作可能

### 技術要件
- **ブラウザ対応**: Chrome, Firefox, Safari, Edge（最新2バージョン）
- **オフライン対応**: インターネット接続なしで動作
- **バンドルサイズ**: 200KB以下（gzip圧縮時）

## 4. 技術スタック案

### フロントエンド
- **フレームワーク**: Vanilla JS または Preact（軽量化重視）
- **レンダリング**: Canvas API または SVG
- **状態管理**: 最小限の自前実装
- **ビルドツール**: Vite（高速ビルド）

### スタイリング
- **CSS**: CSS Modules または Tailwind CSS（パージ設定で最小化）

### 開発ツール
- **言語**: TypeScript（型安全性）
- **テスト**: Vitest（軽量・高速）
- **リンター**: ESLint + Prettier

## 5. アーキテクチャ設計

### データ構造
```typescript
interface Node {
  id: string;
  text: string;
  x: number;
  y: number;
  children: string[]; // 子ノードのID配列
  parent: string | null;
  collapsed: boolean;
  style?: NodeStyle;
}

interface MindMap {
  nodes: Map<string, Node>;
  rootId: string;
  metadata: {
    title: string;
    createdAt: Date;
    updatedAt: Date;
  };
}
```

### コンポーネント構成
1. **MindMapCanvas**: メインキャンバス
2. **Node**: 個別ノードコンポーネント
3. **Toolbar**: ツールバー
4. **ContextMenu**: 右クリックメニュー
5. **ShortcutManager**: キーボードショートカット管理

## 6. 開発フェーズ

### Phase 1: MVP（2週間）
- 基本的なノード操作
- ローカル保存機能
- シンプルなUI

### Phase 2: 拡張機能（1週間）
- スタイリング機能
- ショートカット実装
- エクスポート機能

### Phase 3: 最適化（1週間）
- パフォーマンスチューニング
- バンドルサイズ削減
- ユーザビリティ改善

## 7. 成功指標
- 初期ロード時間: 500ms以下達成
- バンドルサイズ: 200KB以下達成
- ユーザーフィードバック: 「軽い」「速い」という評価
- 1000ノードでの動作確認