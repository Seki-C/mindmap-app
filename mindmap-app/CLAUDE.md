# Lightning MindMap - プロジェクトコンテキスト

## ⚠️ 重要：Git運用ルール（全プロジェクト共通）
**このルールは、Lightning MindMapだけでなく、すべてのプロジェクトで適用されます**

### 必須のGitワークフロー
**すべての機能追加・変更・修正後は必ずGitでコミット・プッシュすること**

1. **機能実装・変更完了後の手順**
   ```bash
   cargo build    # または適切なビルドコマンド
   cargo run      # または適切な実行コマンド（動作確認）
   git add .
   git commit -m "type: 変更内容の説明"
   git push
   ```

2. **コミットメッセージ規約**
   - `feat:` 新機能追加
   - `fix:` バグ修正  
   - `refactor:` リファクタリング
   - `docs:` ドキュメント更新
   - `perf:` パフォーマンス改善
   - `chore:` その他の変更
   - `style:` コードスタイルの変更

3. **コミットタイミング**
   - 機能追加完了時
   - バグ修正完了時
   - 重要な変更を行った時
   - 作業セッション終了前

4. **プッシュの重要性**
   - 常にリモートリポジトリと同期を保つ
   - 作業内容を失わないための保険
   - チーム開発での情報共有

### 他プロジェクトへの適用
- **すべてのGit管理プロジェクトでこのルールを適用**
- 言語やフレームワークに関わらず、同じワークフローを使用
- ビルド・テストコマンドはプロジェクトに応じて調整

---

## プロジェクト概要
Lightning MindMapは、**極限性能を追求した超高速ローカルマインドマップアプリケーション**です。
Rustとeguiを使用して、既存ツールを圧倒する瞬時起動と超高速動作を実現します。

## 現在の開発状況
- **フェーズ**: MVP開発中（アジャイル開発手法を採用）
- **バージョン**: v0.1.0
- **実装済み機能**:
  - 基本的なノード構造（ID、テキスト、位置、親子関係）
  - ノードの表示・追加・選択
  - ドラッグ&ドロップによるノード移動
  - 親子関係の可視化（接続線）
  - リアルタイムFPS表示

## 技術スタック
- **言語**: Rust 1.75+
- **GUI**: egui 0.24 + eframe 0.24（即時モードGUI）
- **ビルドシステム**: Cargo
- **プラットフォーム**: クロスプラットフォーム（Windows/macOS/Linux）

## 性能目標
- **起動時間**: 0.05秒以内
- **レスポンス**: 4ms以内（240fps対応）
- **スケール**: 100,000ノードで60fps維持
- **メモリ**: 基本動作で15MB以下
- **実行ファイル**: 3MB以下

## プロジェクト構造
```
mindmap-app/
├── src/
│   └── main.rs          # メインアプリケーション
├── Cargo.toml           # 依存関係とプロジェクト設定
├── mindmap-requirements.md  # 詳細な要件定義書
├── CLAUDE.md            # このファイル
└── target/              # ビルド出力（.gitignore対象）
```

## 開発方針
1. **アジャイル開発**: 小さく始めて継続的に改善
2. **パフォーマンス優先**: 全ての機能で速度を最優先
3. **シンプルさ重視**: 複雑さよりも保守性を重視
4. **段階的拡張**: MVPから段階的に機能追加

## 次の開発ステップ候補
1. **ノード編集機能**
   - テキストの直接編集
   - ノードの削除（Deleteキー）
   - 複数選択

2. **キーボードショートカット**
   - Tab: 子ノード追加
   - Enter: 兄弟ノード追加
   - Ctrl+Z/Y: Undo/Redo

3. **データ永続化**
   - JSON形式での保存/読み込み
   - 自動保存機能

4. **レイアウト最適化**
   - 自動レイアウト機能
   - ズーム/パン機能
   - ミニマップ

## ビルド・実行方法
```bash
# 開発ビルド
cargo build

# 実行
cargo run

# リリースビルド（最適化）
cargo build --release

# テスト実行
cargo test
```

## 重要な設計判断
1. **Vec<Node>構造**: 初期実装ではシンプルさを優先。将来的にはR-treeなどの空間インデックスを検討
2. **即時モードGUI**: eguiによるシンプルな実装。仮想DOMのオーバーヘッドなし
3. **IDベースの親子関係**: ポインタではなくIDで管理し、メモリ安全性を確保

## パフォーマンス最適化（今後の計画）
- 空間インデックス（R-tree）による描画最適化
- GPU描画の活用（wgpu統合）
- マルチスレッド処理（rayon）
- カスタムアロケータの検討

## 注意事項
- Rust初心者にも理解しやすいコードを心がける
- コメントは最小限に抑え、コードの可読性を重視
- パフォーマンス測定を常に行い、退行を防ぐ
- **Git運用ルールは必ず守ること（上記参照）**

## 関連ドキュメント
- `mindmap-requirements.md`: 詳細な要件定義と技術仕様
- `README.md`: プロジェクトの公開情報